FROM debian:jessie

LABEL author="t0kx (t0kx@protonmail.ch)"
LABEL maintainer="cved (cved@protonmail.com)"

ENV LANG C.UTF-8
ENV LANGUAGE C.UTF-8
ENV LC_ALL C.UTF-8

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get -y update \
    && apt-get -y install \
    wget \
    apache2 \
    php5 \
    gcc \
    make \
    && apt-get autoremove \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

RUN cd /tmp \
    && wget ftp://ftp.proftpd.org/distrib/source/proftpd-1.3.5.tar.gz \
    && tar xfz proftpd-1.3.5.tar.gz \
    && cd proftpd-1.3.5 \
    && ./configure --with-modules=mod_copy \
    && make \
    && make install \
    && rm -rf /tmp/proftpd-1.3.5.tar.gz /tmp/proftpd-1.3.5 

RUN chmod 777 -R /var/www/html/

EXPOSE 21 80

COPY build/main.sh /
ENTRYPOINT ["/main.sh"]

CMD ["default"]
